{% extends "booking/base.html" %}

{% block content %}
<h2>Available Travels</h2>

<!-- 🔍 Filter Form -->
<form method="get" class="row mb-3">
    <div class="col">
        <select name="type" class="form-select">
            <option value="All">All Types</option>
            <option value="Flight">Flight</option>
            <option value="Train">Train</option>
            <option value="Bus">Bus</option>
        </select>
    </div>
    <div class="col">
        <input type="text" name="source" class="form-control" placeholder="Source">
    </div>
    <div class="col">
        <input type="text" name="destination" class="form-control" placeholder="Destination">
    </div>
    <div class="col">
        <button type="submit" class="btn btn-primary">Filter</button>
    </div>
</form>

<!-- 📋 Travels Table -->
<table class="table">
    <tr>
        <th>Type</th>
        <th>From</th>
        <th>To</th>
        <th>Date</th>
        <th>Price</th>
        <th>Seats</th>
        <th>Action</th>
    </tr>
    {% for travel in travels %}
    <tr>
        <td>{{ travel.type }}</td>
        <td>{{ travel.source }}</td>
        <td>{{ travel.destination }}</td>
        <td>{{ travel.date_time }}</td>
        <td>{{ travel.price }}</td>
        <td>{{ travel.available_seats }}</td>
        <td>
            {% if user.is_authenticated %}
                <a href="{% url 'book_travel' travel.id %}" class="btn btn-warning">Book</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-warning">Login to Book</a>
            {% endif %}
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="7" class="text-center">No travels found</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
